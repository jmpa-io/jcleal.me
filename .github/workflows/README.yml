---
name: README.md
on:
  push:
    paths:
    - '.github/workflows/*'
    - 'templates/*'
    - 'docs/*'
  workflow_dispatch:
  repository_dispatch:
    types: [update-readme]

permissions:
  id-token: write
  contents: write
  actions: read

jobs:
  generate-readme:
    uses: jmpa-io/pipelines/.github/workflows/00-README.yml@main
    secrets: inherit

  post-to-slack:
    needs: [generate-readme]
    if: always()
    uses: jmpa-io/pipelines/.github/workflows/99-post-to-slack.yml@main
    secrets:
      WEBHOOK: ${{ secrets.SLACK_GITHUB_NOTIFICATIONS_WEBHOOK }}
